<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Use correct character set. -->
  <meta charset="utf-8">
  <!-- Tell IE to use the latest, best version. -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <title>Hello World!</title>
  <script src="../Build/Cesium/Cesium.js"></script>
  <script src="jquery-3.1.1.js"></script>
  <script src="../api/moving.js"></script>
  <script src="../api/utility.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>

  <style>

  @import url(../Build/Cesium/Widgets/widgets.css);
  html, body, #cesiumContainer {
    width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden;
  }
  @import url(Sandcastle/templates/bucket.css);

  table {
    color : white;
  }

  #name_list {
    cursor: pointer;
  }
  .graph{
    position : absolute;
    bottom : 0;
    width : 80%; height : 0%;
    z-index:2;
  }
  </style>
</head>
<body>

<div id="cesiumContainer" style="position:absolute; top:0px; z-index:1;"></div>

<svg id="graph" class="graph" > </svg>

</body>

<script>
  viewer = new Cesium.Viewer('cesiumContainer');
  scene = viewer.scene;
  scene.primitives.destroyPrimitives = false;
  viewer.clock.shouldAnimate = false;
  //mfl = new MovingFeatureList();

  function point_test(){
    $.getJSON("http://ec2-52-198-116-39.ap-northeast-1.compute.amazonaws.com:9876/FeatureLayers('Typhoon1995')/features('685556100')").then(
      function(data){
        console.log(data);
        var mf_arr = [];
        for (var i = 0 ; i < data.features.length / 2 ; i++){
          mf_arr.push(data.features[i]);
        }

        var move = new Moving()
        var czml = move.movePointArray(mf_arr, 1);
        console.log(czml);
        var load_czml = Cesium.CzmlDataSource.load(czml)
        viewer.dataSources.add(load_czml);
      }
    );
  }

  point_test();

  function poylgon_test(){
    $.getJSON('json_data/polygon2016.json').then(
      function(data){
        console.log(data);
        var mf_arr = [];
        for (var i = 0 ; i < data.features.length / 2 ; i++){
          mf_arr.push(data.features[i]);
        }

        var move = new Moving()
        var czml = move.movePolygonArray(mf_arr, 1);
        console.log(czml);
        var load_czml = Cesium.CzmlDataSource.load(czml)
        viewer.dataSources.add(load_czml);
      }
    );


  }

</script>


</html>
